(this.webpackJsonpalgorithm_visualizer=this.webpackJsonpalgorithm_visualizer||[]).push([[0],{14:function(e,t,i){},21:function(e,t,i){},22:function(e,t,i){},24:function(e,t,i){},25:function(e,t,i){"use strict";i.r(t);var a=i(0),s=i(1),n=i.n(s),r=i(15),d=i.n(r),o=(i(21),i(22),i(2)),h=i(3),c=i(8),l=i(7),u=i(4),g=i(6),p=i.n(g),v=i(11),m=i(10),b=i(5),f=(i(14),function(){function e(t,i,a){Object(o.a)(this,e),this.gridIndex=[t,i],this.nodeType=0,this.weight=a}return Object(h.a)(e,[{key:"addNeighbour",value:function(e){this.neighbours.push(e)}},{key:"setGridIndex",value:function(e){this.gridIndex=e}},{key:"getGridIndex",value:function(){return this.gridIndex}},{key:"setType",value:function(e){this.nodeType=e}},{key:"getType",value:function(){return this.nodeType}},{key:"removeNeighbour",value:function(e){var t=this.neighbours.indexOf(e);if(t>-1)return this.neighbours.splice(t,1),e}},{key:"getNeighbours",value:function(){return this.neighbours}}]),e}()),j=function(e){Object(c.a)(i,e);var t=Object(l.a)(i);function i(e){var a;return Object(o.a)(this,i),(a=t.call(this,e)).cellWasHovered=function(e){e.preventDefault();1!=e.buttons&&3!=e.buttons||(a.props.gridWasClicked(Object(b.a)(a)),document.selection?document.selection.empty():window.getSelection().removeAllRanges())},a.cellWasClicked=function(e){e.preventDefault(),a.props.gridWasClicked(Object(b.a)(a))},a.itemDiv=n.a.createRef(),a.state={node:a.props.node,styleName:a.props.styleName,styleObj:a.props.styleObj,showWeight:a.props.showWeight,weight:a.props.weight},a.updateNode=a.updateNode.bind(Object(b.a)(a)),a}return Object(h.a)(i,[{key:"componentDidMount",value:function(){var e=this.props.itemNode;this.setState({node:e,styleName:this.props.styleName,styleObj:this.props.styleObj,showWeight:this.props.showWeight,weight:this.props.weight})}},{key:"componentDidUpdate",value:function(e){this.props.showWeight!=e.showWeight&&this.setState({showWeight:this.props.showWeight}),this.props.styleName!=e.styleName&&this.setState({styleName:this.props.styleName})}},{key:"componentWillUnmount",value:function(){}},{key:"updateNode",value:function(e){switch(this.setState({node:e}),e.nodeType){case 1:this.setState({styleName:"grid-item-start"});break;case 2:this.setState({styleName:"grid-item-end"});break;case 3:this.setState({styleName:"grid-item-obstacle"});break;default:this.setState({styleName:this.props.styleName})}}},{key:"render",value:function(){var e=!!this.state.node,t=this.props.visited?this.props.styleName:this.state.styleName,i=this.props.visited?this.props.styleObj:void 0;return e?Object(a.jsx)("div",{className:t,style:i,onClick:this.cellWasClicked,onMouseOver:this.cellWasHovered}):Object(a.jsx)("div",{})}}]),i}(n.a.Component);function y(e){return"string"!=typeof e?e:[parseInt(e.split(",")[0]),parseInt(e.split(",")[1])]}function k(e,t){return e[0]==t[0]&&e[1]==t[1]}function S(e){return new Promise((function(t){return setTimeout(t,e)}))}var x=function(){function e(t){Object(o.a)(this,e),this.graph=t,this.adjacencyList={},this.start=void 0,this.goal=void 0,this.initAdjList()}return Object(h.a)(e,[{key:"updateNode",value:function(e){if(this.graph[e.gridIndex[1]][e.gridIndex[0]][1]=e,3===e.nodeType){for(var t in this.adjacencyList[e.gridIndex])this.removeEdge(e.gridIndex,t);var i=Object(u.a)(e.gridIndex,2),a=i[0],s=i[1];a+1<this.graph[0].length&&s-1>0&&3===this.graph[s-1][a+1][1].nodeType&&this.removeEdge([a,s-1],[a+1,s]),a+1<this.graph[0].length&&s+1<this.graph.length&&3===this.graph[s+1][a+1][1].nodeType&&this.removeEdge([a+1,s],[a,s+1]),a-1>0&&s+1<this.graph.length&&3===this.graph[s+1][a-1][1].nodeType&&this.removeEdge([a-1,s],[a,s+1]),a-1>0&&s-1>0&&3===this.graph[s-1][a-1][1].nodeType&&this.removeEdge([a,s-1],[a-1,s])}else 3!==e.nodeType&&0===Object.entries(this.adjacencyList[e.gridIndex]).length&&(this.adjacencyList[e.gridIndex]={},this.generateNodeNeighbours(e.gridIndex.toString()))}},{key:"calcMovementCost",value:function(e,t){return y(e)[0]===y(t)[0]||y(e)[1]===y(t)[1]?10:14}},{key:"getWeight",value:function(e,t){return this.adjacencyList[e][t]}},{key:"removeEdge",value:function(e,t){e=e.toString(),t=t.toString(),delete this.adjacencyList[e][t],delete this.adjacencyList[t][e]}},{key:"addEdge",value:function(e){var t,i=e[0].toString(),a=e[1].toString();for(var s in this.adjacencyList[i])if(s===a)return;void 0!==this.adjacencyList[i]&&((t=this.adjacencyList[i])[a]=this.calcMovementCost(i,a),this.adjacencyList[i]=t),void 0!==this.adjacencyList[a]&&((t=this.adjacencyList[a])[i]=this.calcMovementCost(i,a),this.adjacencyList[a]=t)}},{key:"initAdjList",value:function(){for(var e=0;e<this.graph.length;e++)for(var t=0;t<this.graph[e].length;t++)this.adjacencyList[this.graph[e][t][1].gridIndex]={};this.generateEdges()}},{key:"generateNodeNeighbours",value:function(e){var t=y(e)[0],i=y(e)[1],a=[t,i],s=[0,0];3!==this.graph[i][t][1].nodeType&&(t-1>=0&&3!==this.graph[i][t-1][1].nodeType&&(s=[t-1,i],this.addEdge([a,s])),t+1<this.graph[0].length&&3!==this.graph[i][t+1][1].nodeType&&(s=[t+1,i],this.addEdge([a,s])),i-1>=0&&3!==this.graph[i-1][t][1].nodeType&&(s=[t,i-1],this.addEdge([a,s])),i+1<this.graph.length&&3!==this.graph[i+1][t][1].nodeType&&(s=[t,i+1],this.addEdge([a,s])),t-1>=0&&i+1<this.graph.length&&3!==this.graph[i+1][t-1][1].nodeType&&(s=[t-1,i+1],this.addEdge([a,s])),t-1>=0&&i-1>=0&&3!==this.graph[i-1][t-1][1].nodeType&&(s=[t-1,i-1],this.addEdge([a,s])),t+1<this.graph[0].length&&i-1>=0&&3!==this.graph[i-1][t+1][1].nodeType&&(s=[t+1,i-1],this.addEdge([a,s])),t+1<this.graph[0].length&&i+1<this.graph.length&&3!==this.graph[i+1][t+1][1].nodeType&&(s=[t+1,i+1],this.addEdge([a,s])))}},{key:"generateEdges",value:function(){for(var e in this.adjacencyList)this.generateNodeNeighbours(e)}}]),e}(),O=function(){function e(t){Object(o.a)(this,e),this.queue=[]}return Object(h.a)(e,[{key:"queue_item",value:function(e,t){for(var i=y(e),a=Object(u.a)(i,2),s=a[0],n=a[1],r=new f(s,n,t),d=!1,o=0;o<this.queue.length;o++)if(this.queue[o].weight>r.weight){this.queue.splice(o,0,r),d=!0;break}d||this.queue.push(r)}},{key:"dequeue",value:function(){if(!this.isEmpty())return this.queue.shift()}},{key:"isEmpty",value:function(){return!(this.queue.length>0)}}]),e}();function w(e,t,i){t||console.log("start was not defined"),i||console.log("end was not defined");var a=new O,s=[],n={},r=[],d=[];for(var o in e)r[o]=1/0,d[o]=void 0;for(var o in r[t]=0,e)a.queue_item(o,r[o]);for(;!a.isEmpty();){var h=a.dequeue().gridIndex;if(k(h,i)){for(console.log("Goal reached");void 0!=h&&!k(h,t);)s.push(h),h=d[h];return s.push(t),[n,s]}for(var c in e[h])r[c]>r[h]+e[h][c]&&(r[c]=r[h]+e[h][c],d[c]=h,n[c]||(a.queue_item(c,r[c]),n[c]=r[c]))}return s}function N(e,t){var i=y(e),a=Object(u.a)(i,2),s=a[0],n=a[1],r=y(t),d=Object(u.a)(r,2),o=d[0],h=d[1],c=Math.abs(s-o),l=Math.abs(n-h);return 10*(c+l)+-6*Math.min(c,l)}function C(e,t,i){var a=new O,s={},n={},r=[],d=[],o=[];for(a.queue_item(t,0),r.push(t),s[t]=0,n[t]=void 0;!a.isEmpty();){var h=a.dequeue(),c=h.gridIndex;if(d[h.gridIndex]=s[h.gridIndex],k(c,i)){for(console.log("Goal reached");void 0!=c&&!k(c,t);)o.push(c),c=n[c];return o.push(t),[d,o]}for(var l in e[c]){var u=y(l);if(!r.includes(l)){var g=s[c]+e[c][u];if(!s[u]||g<s[u]){n[u]=c,s[u]=g;var p=g+N(u,i);a.queue_item(u,p)}}}r.push(c.toString())}}var T=function(){function e(t){Object(o.a)(this,e),this.adj=t,this.visitedNodes=[],this.init()}return Object(h.a)(e,[{key:"init",value:function(){for(var e=Object.keys(this.adj),t=y(e[e.length-1]),i=Object(u.a)(t,2),a=i[0],s=i[1],n=0;n<=s;n++){for(var r=[],d=0;d<=a;d++)r.push(!1);this.visitedNodes.push(r)}this.generateMaze(e[0])}},{key:"generateMaze",value:function(e){var t=y(e);console.log(t),this.visitedNodes[t[1]][t[0]]=!0;for(var i=Object.keys(this.adj[e]),a=i.length-1;a>=0;a--){var s=y(i[a]);this.visitedNodes[s[1]][s[0]]&&i.splice(a,1),t[0]!=s[0]&&t[1]!=s[1]&&i.splice(a,1)}for(;i.length>0;){var n=i[Math.floor(Math.random()*Math.floor(i.length))];n=y(n);for(var r=0,d=Object.keys(this.adj[n.toString()]),o=d.length-1;o>=0;o--){var h=y(d[o]);this.visitedNodes[h[1]][h[0]]&&(d.splice(o,1),r+=1),n[0]!=h[0]&&n[1]!=h[1]&&d.splice(o,1)}if(r<=2){this.visitedNodes[n[1]][n[0]]=!0;for(var c=0;c<d.length;c++)i.push(d[c])}i.splice(i.indexOf(n.toString()),1)}}}]),e}(),A=function(e){Object(c.a)(i,e);var t=Object(l.a)(i);function i(e){var a;return Object(o.a)(this,i),(a=t.call(this,e)).handleSpeedSlider=function(e){a.setState({animationSpeed:e.target.value})},a.handleCheckboxChange=function(e){a.setState({showWeights:e.target.value})},a.gridWasClicked=function(e){if(a.state.isAnimating&&a.cancelAnimation(),e.state.node.nodeType!==a.state.drawMode){var t=e.state.node;switch(a.state.drawMode){case 1:if(a.state.gridStartPos){var i=a.state.gridStartPos.state.node.gridIndex[0],s=a.state.gridStartPos.state.node.gridIndex[1],n=a.state.gridState[s][i][1];n.nodeType=0,a.updateGridItem([i,s],n,0)}t.nodeType=1,a.updateGridItem(t.gridIndex,t,1),a.setState({gridStartPos:e});break;case 2:if(a.state.gridEndPos){var r=a.state.gridEndPos.state.node.gridIndex[0],d=a.state.gridEndPos.state.node.gridIndex[1],o=a.state.gridState[d][r][1];o.nodeType=0,a.updateGridItem([r,d],o,0)}t.nodeType=2,a.updateGridItem(t.gridIndex,t,2),a.setState({gridEndPos:e});break;case 3:t.nodeType=a.state.drawMode,a.updateGridItem(t.gridIndex,t,3);break;default:return}}},a.state={gridRowCount:35,gridColCount:72,algorithm:void 0,drawMode:void 0,gridState:[],Graph:void 0,gridStartPos:void 0,gridEndPos:void 0,curGrid:void 0,isVisualized:!1,isAnimating:!1,animationSpeed:50,showWeights:!1},a.handleAlgorithmModeChange=a.handleAlgorithmModeChange.bind(Object(b.a)(a)),a.handleDrawModeChange=a.handleDrawModeChange.bind(Object(b.a)(a)),a.handleResetClick=a.handleResetClick.bind(Object(b.a)(a)),a.handleSimulateClick=a.handleSimulateClick.bind(Object(b.a)(a)),a.generateMaze=a.generateMaze.bind(Object(b.a)(a)),a.animate=a.animate.bind(Object(b.a)(a)),a.AlgorithmTypes=Object.freeze({Dijkstra:w,Astar:C}),a}return Object(h.a)(i,[{key:"componentDidMount",value:function(){this.setState({algorithm:this.AlgorithmTypes.Dijkstra,drawMode:1});var e=window.innerWidth,t=(window.innerWidth,Math.floor(e/14)),i=Math.floor(e/14);this.setState({gridColCount:t,gridRowCount:i}),this.initGrid()}},{key:"handleResetClick",value:function(){var e=Object(m.a)(p.a.mark((function e(){var t,i,a,s,r,d,o;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=Math.random(),this.setState({isAnimating:!1,isVisualized:!1}),i=Object(v.a)(this.state.gridState),a=0;a<i.length;a++)for(s=0;s<i[a].length;s++)(r=i[a][s][1]).nodeType=0,r.weight=0,d=n.a.cloneElement(i[a][s][0],{visited:!1,styleName:"grid-item",itemNode:r}),i[a][s][0]=d;o=new x(this.state.gridState),this.setState({curGrid:t,gridState:i,Graph:o,gridStartPos:void 0,gridEndPos:void 0});case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"cancelAnimation",value:function(){this.setState({isAnimating:!1,isVisualized:!1});for(var e=Object(v.a)(this.state.gridState),t=this.state.Graph,i=0;i<e.length;i++)for(var a=0;a<e[i].length;a++)if(e[i][a][0].props.visited){var s=e[i][a][1];s.nodeType=0;var r=n.a.cloneElement(e[i][a][0],{visited:!1,styleName:"grid-item",itemNode:s});e[i][a][0]=r,t.updateNode(s)}this.setState({gridState:e,Graph:t}),console.log("animation cancelled!")}},{key:"handleSimulateClick",value:function(){var e=Object(m.a)(p.a.mark((function e(){var t,i,a,s;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.state.isVisualized&&!this.state.isAnimating){e.next=4;break}return this.cancelAnimation(),e.next=4,S(1);case 4:if(!(this.state.gridState&&this.state.gridStartPos&&this.state.gridEndPos)){e.next=19;break}t=this.state.gridStartPos.state.node.gridIndex,i=this.state.gridEndPos.state.node.gridIndex,e.t0=this.state.algorithm,e.next=e.t0===this.AlgorithmTypes.Dijkstra?10:e.t0===this.AlgorithmTypes.Astar?13:16;break;case 10:return a=w(this.state.Graph.adjacencyList,t,i),this.animate(a[0],a[1]),e.abrupt("break",17);case 13:return s=C(this.state.Graph.adjacencyList,t,i),this.animate(s[0],s[1]),e.abrupt("break",17);case 16:return e.abrupt("break",17);case 17:e.next=20;break;case 19:console.log("Grid was undefined");case 20:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"animate",value:function(){var e=Object(m.a)(p.a.mark((function e(t,i){var a,s,r,d,o,h,c,l,g,m,b,f,j,x,O,w,N,C,T,A;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Animation started"),e.next=3,this.setState({isAnimating:!0});case 3:a=Object(v.a)(this.state.gridState),s=0,r=Object.entries(t);case 5:if(!(s<r.length)){e.next=26;break}return d=Object(u.a)(r[s],2),o=d[0],h=d[1],e.next=9,S(100-this.state.animationSpeed);case 9:if(this.state.isAnimating){e.next=11;break}return e.abrupt("return");case 11:if(c=y(o),l=Object(u.a)(c,2),g=l[0],m=l[1],!k([g,m],this.state.gridEndPos.state.node.gridIndex)&&!k([g,m],this.state.gridStartPos.state.node.gridIndex)){e.next=14;break}return e.abrupt("continue",23);case 14:b=a[m][g][0],(f=[0,191,255])[0]+=h/3,f[1]-=h/3*2,f[2]-=h/3*2,j={"background-color":"rgb("+f[0]+","+f[1]+","+f[2]+")"},x=n.a.cloneElement(b,{visited:!0,styleName:"grid-item-visited",styleObj:j,weight:h,showWeight:this.state.showWeights}),a[m][g][0]=x,this.setState({gridState:a});case 23:s++,e.next=5;break;case 26:O=1;case 27:if(!(O<i.length-1)){e.next=40;break}return e.next=30,S(100-this.state.animationSpeed);case 30:if(this.state.isAnimating){e.next=32;break}return e.abrupt("return");case 32:w=y(i[O]),N=Object(u.a)(w,2),C=N[0],T=N[1],A=a[T][C][0],A=n.a.cloneElement(A,{visited:!0,styleName:"grid-item-shortestPath",styleObj:void 0}),a[T][C][0]=A,this.setState({gridState:a});case 37:O++,e.next=27;break;case 40:this.setState({gridState:a,isVisualized:!0,isAnimated:!1});case 41:case"end":return e.stop()}}),e,this)})));return function(t,i){return e.apply(this,arguments)}}()},{key:"generateMaze",value:function(){var e=Object(m.a)(p.a.mark((function e(){var t,i,a,s;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.state.isAnimating&&!this.state.isVisualized){e.next=4;break}return this.handleResetClick(),e.next=4,S(10);case 4:return t=new T(this.state.Graph.adjacencyList),e.next=7,this.setState({isAnimating:!0});case 7:i=0;case 8:if(!(i<t.visitedNodes.length)){e.next=30;break}a=0;case 10:if(!(a<t.visitedNodes[i].length)){e.next=27;break}if(this.state.isAnimating){e.next=18;break}return this.setState({isVisualized:!0}),console.log(this.state.isVisualized),console.log("Cancelled"),e.next=17,S(10);case 17:return e.abrupt("return");case 18:if(!1!==t.visitedNodes[i][a]){e.next=24;break}return s=this.state.gridState,e.next=22,this.updateGridItem([a,i],s[i][a][1],3);case 22:return e.next=24,S(100-this.state.animationSpeed);case 24:a++,e.next=10;break;case 27:i++,e.next=8;break;case 30:this.setState({isAnimating:!1,isVisualized:!0});case 31:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleAlgorithmModeChange",value:function(e){switch(e.target.value){case"Dijkstra":this.setState({algorithm:this.AlgorithmTypes.Dijkstra});break;case"Astar":this.setState({algorithm:this.AlgorithmTypes.Astar});break;case"BFS":this.setState({algorithm:this.AlgorithmTypes.BFS});break;default:this.setState({algorithm:this.AlgorithmTypes.Dijkstra})}}},{key:"handleDrawModeChange",value:function(e){switch(e.target.value){case"start":this.setState({drawMode:1});break;case"end":this.setState({drawMode:2});break;case"obstacle":this.setState({drawMode:3});break;default:this.setState({drawMode:1})}console.log("this changed to "+e.target.value)}},{key:"updateGridItem",value:function(e,t,i){var a=Object(v.a)(this.state.gridState),s="";switch(i){case 1:s="grid-item-start";break;case 2:s="grid-item-end";break;case 3:s="grid-item-obstacle";break;default:s="grid-item"}var r=n.a.cloneElement(a[e[1]][e[0]][0],{itemNode:t,styleName:s});a[e[1]][e[0]][0]=r,t.nodeType=i,a[e[1]][e[0]][1]=t;var d=this.state.Graph;d.updateNode(t),this.setState({gridState:a,Graph:d})}},{key:"pushElemsToGrid",value:function(e){var t=this.state.gridState;t.push(e),this.setState({gridState:t})}},{key:"initGrid",value:function(){for(var e=0,t=0;t<this.state.gridRowCount;t++){for(var i=[],s=0;s<this.state.gridColCount;s++){var n=new f(s,t,0);i.push([Object(a.jsx)(j,{gridWasClicked:this.gridWasClicked,itemNode:n,styleName:"grid-item",visited:!1},e),n]),e++}this.pushElemsToGrid(i)}this.setState({Graph:new x(this.state.gridState)})}},{key:"render",value:function(){var e=this.state.gridState?this.state.gridState:[[1]];return Object(a.jsxs)("div",{className:"layout-container",children:[Object(a.jsxs)("nav",{className:"layout-nav-bar",children:[Object(a.jsx)("button",{className:"layout-nav-button",onClick:this.handleSimulateClick,children:"Simulate"}),Object(a.jsx)("button",{className:"layout-nav-button",onClick:this.generateMaze,children:"Generate maze"}),Object(a.jsx)("button",{className:"layout-nav-button",onClick:this.handleResetClick,children:"Reset"}),Object(a.jsxs)("div",{className:"dropdown-container",children:[Object(a.jsx)("label",{className:"dropdown-description",children:"Algorithm mode"}),Object(a.jsxs)("select",{name:"algorithmMode",id:"algorithm_mode",className:"selector-dropdown",onChange:this.handleAlgorithmModeChange,children:[Object(a.jsx)("option",{value:"Dijkstra",children:"Dijkstra"}),Object(a.jsx)("option",{value:"Astar",children:"A*"})]})]}),Object(a.jsxs)("div",{className:"slider-container",children:[Object(a.jsxs)("label",{className:"slider-description",children:["Animation speed: ",this.state.animationSpeed]}),Object(a.jsx)("input",{onChange:this.handleSpeedSlider,type:"range",className:"animation-speed-slider",min:"1",max:"100",value:this.state.animationSpeed})]}),Object(a.jsxs)("div",{className:"dropdown-container",children:[Object(a.jsx)("label",{className:"dropdown-description",children:"Drawing mode"}),Object(a.jsxs)("select",{name:"drawingMode",id:"drawing_mode",className:"selector-dropdown",onChange:this.handleDrawModeChange,children:[Object(a.jsx)("option",{value:"start",children:"Start location"}),Object(a.jsx)("option",{value:"end",children:"End location"}),Object(a.jsx)("option",{value:"obstacle",children:"Obstacle"})]})]})]}),Object(a.jsx)("div",{children:Object(a.jsx)("div",{className:"grid-container",children:e.map((function(e,t){return Object(a.jsx)("div",{className:"grid-row",children:e.map((function(e,t){return e[0]}))},t)}))},this.state.curGrid)})]})}}]),i}(n.a.Component),I=(i(24),function(e){Object(c.a)(i,e);var t=Object(l.a)(i);function i(e){var s;return Object(o.a)(this,i),(s=t.call(this,e)).state={currentLayout:Object(a.jsx)(A,{})},s}return Object(h.a)(i,[{key:"render",value:function(){return Object(a.jsx)("div",{className:"layout-wrapper",children:this.state.currentLayout})}}]),i}(n.a.Component));var M=function(){return Object(a.jsx)("div",{className:"App",children:Object(a.jsx)(I,{})})},E=function(e){e&&e instanceof Function&&i.e(3).then(i.bind(null,26)).then((function(t){var i=t.getCLS,a=t.getFID,s=t.getFCP,n=t.getLCP,r=t.getTTFB;i(e),a(e),s(e),n(e),r(e)}))};d.a.render(Object(a.jsx)(M,{}),document.getElementById("root")),E()}},[[25,1,2]]]);
//# sourceMappingURL=main.30faf8ac.chunk.js.map